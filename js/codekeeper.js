function number_pad(txt){var size=2;var s=String(txt);while(s.length<(size||2)){s="0"+s}
return s}
var offer_term="12";var market_file_previous="";var speed_limit_previous="";var market_previous="";var brand_previous="";const url_params=new URLSearchParams(document.location.search);let url_param_speed='';let url_param_internet_add_ons='';let defaultDataPrice='';var ca_fiber_to_home_cfs='';let top_bar_offer=!1
let internet_offer_lowest_speed=''
let internet_offer_lowest_id=''
let internet_offer_lowest_price=''
let internet_offer_lowest_shop_url=''
function bap_shop_url(){var brand=getCookie('geo_brand');if(getCookie('cfs_shop_url')!==null&&getCookie('cfs_shop_url').length>1){var shop_link=decodeURIComponent(getCookie('cfs_shop_url'));if(shop_link.includes(brand)){return shop_link}}
var shop_link="https://shop.astound.com/offer/";return decodeURI(shop_link)}
var loadingTimer=8000;jQuery(document).ready(function(){var disclaimerTextDefault="Equipment priced separately";var disclaimerTextBostonTV="Modem/Router included 12 mo. <br> Showtime/TMC AND Starz included 12 mo.";var disclaimerTextBostonModemRouter="Modem/Router included 12 mo.";var isBoston=$('main > article').hasClass('regions-boston');$("#modal_cfs button#cfs_confirm_address_a").click(function(){if($("#modal_cfs").attr("data-link-straight-to-shop")=="Y"){var shop_url=$(this).attr("href");shop_url=url_builder(shop_url);document.location.href=shop_url;$('body').addClass('loading-shop');setTimeout(function(){$('body').removeClass('loading-shop')},loadingTimer)}});var bap_data;if($('section.interactive-shop').length>0){$('.interactive-shop').each(function(){if(isBoston){$('.is-summary-disclaimer').css('font-size','12px');$('.is-product-item').each(function(){var internetEquipmentIncluded=$(this).find('.is-summary-disclaimer:contains(Internet Equipment Included)');var equipmentPricedSeparately=$(this).find('.is-summary-disclaimer:contains(Equipment priced separately)');if(internetEquipmentIncluded.length>0){internetEquipmentIncluded.html(disclaimerTextBostonModemRouter)}else if(equipmentPricedSeparately.length>0){equipmentPricedSeparately.html(disclaimerTextBostonModemRouter)}})}
$('#is-streaming-tv-toggle').click(function(){if(!$(this).parent().hasClass('active')){$(this).parent().addClass('active');$(this).parent().children('[name="is-streaming-tv"]').prop('checked',!0);$(this).parent(".toggle-wrapper").children('.value-output').text('Included');if(isBoston){$('.is-summary-disclaimer').css('font-size','12px');$('.is-summary-disclaimer:nth-of-type(3)').each(function(){$(this).html(disclaimerTextBostonTV)})}}else{$(this).parent().removeClass('active');$(this).parent().children('[name="is-streaming-tv"]').prop('checked',!1);$(this).parent(".toggle-wrapper").children('.value-output').text('Not Included');if(isBoston){$('.is-summary-disclaimer').css('font-size','12px');$('.is-summary-disclaimer:nth-of-type(3)').each(function(){$(this).html(disclaimerTextBostonModemRouter)})}}
applyShopFilters()});$('#is-phone-toggle').click(function(){if(!$(this).parent().hasClass('active')){$(this).parent().addClass('active');$(this).parent().children('[name="is-phone"]').prop('checked',!0);$(this).parent().children('.value-output').text('Included')}else{$(this).parent().removeClass('active');$(this).parent().children('[name="is-phone"]').prop('checked',!1);$(this).parent().children('.value-output').text('Not Included')}
applyShopFilters()});$('#is-internet-speed-min').change(function(){var val=$(this).val();min_speed_index=$('#is-internet-speed-min').find(":selected").index();max_speed_index=$('#is-internet-speed-max').find(":selected").index();if(max_speed_index<min_speed_index){$('#is-internet-speed-min').prop('selectedIndex',max_speed_index)}
applyShopFilters()});$('#is-internet-speed-max').change(function(){var val=$(this).val();min_speed_index=$('#is-internet-speed-min').find(":selected").index();max_speed_index=$('#is-internet-speed-max').find(":selected").index();if(max_speed_index<min_speed_index){$('#is-internet-speed-max').prop('selectedIndex',min_speed_index)}
applyShopFilters()});$('.shop-filter-toggle').click(function(){if(!$(this).hasClass('active')){$(this).addClass('active');$(this).closest('.interactive-shop').find('.is-filter-bar-inner').addClass('active');$(this).closest('.interactive-shop').find('.is-filter-bar-spacer').addClass('active')}else{$(this).removeClass('active');$(this).closest('.interactive-shop').find('.is-filter-bar-inner').removeClass('active');$(this).closest('.interactive-shop').find('.is-filter-bar-spacer').removeClass('active')}});$('input[type=radio][name=is-sort-by-input]').change(function(){if(this.value=='Most Popular'){var $wrapper=$('.is-products');$wrapper.find('.is-product-item').sort(function(a,b){return+a.getAttribute('data-sort')- +b.getAttribute('data-sort')}).appendTo($wrapper)}else if(this.value=='Speed'){var $wrapper=$('.is-products');$wrapper.find('.is-product-item').sort(function(a,b){return+b.getAttribute('data-speed')- +a.getAttribute('data-speed')}).appendTo($wrapper)}});var options={"offset":$(this).find('.is-filter-bar').offset().top,"tolerance":{up:60,down:0},"classes":{"initial":"animated","pinned":"slideDown","unpinned":"slideUp"},onUnpin:function onUnpin(){}};var headroom=new Headroom($(this).find('.is-filter-bar')[0],options);headroom.init()});if($("#is-streaming-tv-toggle").parent(".toggle-wrapper").hasClass("active")){$("#is-streaming-tv-toggle").parent(".toggle-wrapper").children(".value-output").text("Included");if(isBoston){$('.is-summary-disclaimer').css('font-size','12px');$('.is-summary-disclaimer:nth-of-type(3)').each(function(){$(this).html(disclaimerTextBostonTV)})}else{$('.is-summary-disclaimer').css('font-size','13px')}}else{$("#is-streaming-tv-toggle").parent(".toggle-wrapper").children(".value-output").text("Not Included")}
if($("#is-phone-toggle").parent(".toggle-wrapper").hasClass("active")){$("#is-phone-toggle").parent(".toggle-wrapper").children(".value-output").text("Included")}else{$("#is-phone-toggle").parent(".toggle-wrapper").children(".value-output").text("Not Included")}
applyShopFilters()}
function applyShopFilters(){var service_codes="D";if($('#is-streaming-tv-toggle').parent().hasClass('active')&&$('#is-phone-toggle').parent().hasClass('active')){service_codes="DCT"}else if($('#is-streaming-tv-toggle').parent().hasClass('active')){service_codes="DC"}else if($('#is-phone-toggle').parent().hasClass('active')){service_codes="DT"}
var internet_speeds=[];var filtered_speeds=[];var min_speed_index=0;var max_speed_index=0;$('#is-internet-speed-min option').each(function(){internet_speeds.push($(this).val())});min_speed_index=$('#is-internet-speed-min').find(":selected").index();max_speed_index=$('#is-internet-speed-max').find(":selected").index();filtered_speeds=internet_speeds.slice(min_speed_index,max_speed_index+1);$('.is-product-item').each(function(){if(filtered_speeds.includes($(this).attr("data-speed"))&&service_codes==$(this).attr("data-service-codes")){$(this).show()}else{$(this).hide()}})}
$(".gbb-product .checkbox").change(function(){gbbPriceUpdate($(this).closest(".product-card"))});function gbbPriceUpdate(offer){var offer_ids=[];var brand_gbb=$(".layout-product-cards").attr("data-brand");var internet_offer_id=offer.attr("offer-id");var total_price=parseInt(offer.attr("data-price"));var internet_speed=offer.attr("data-speed");offer_ids.push(internet_offer_id);var addons_checked=offer.find('.product-card-inner input:checkbox:checked');addons_checked.each(function(index){var addon_id=$(this).val();var addon_price=$(this).attr("data-price");total_price+=parseInt(addon_price);offer_ids.push(addon_id)});total_price=total_price/100;offer.find(".price-amount").html(total_price);var total_price_dollars=parseInt(total_price);var total_price_cents=parseInt(total_price.toString().slice(-2));var total_price_arr=toUSD(total_price);offer.find(".price-dollars").html(total_price_arr.dollars);offer.find(".price-cents").html(total_price_arr.cents);var url=bap_shop_url();var offer_ids_dashed="";var offer_split_counter=0;for(i=0;i<offer_ids.length;i++){var split_separator="-";if(i==0){split_separator=""}
if(i==1){split_separator="/"}
offer_ids_dashed+=split_separator+offer_ids[i];offer_split_counter++}
offer_ids_dashed=offer_ids_dashed.replace(/\/$/,'');offer_ids_dashed=offer_ids_dashed.replace(/\-$/,'');var body_brand=$("body").attr("brand");var new_url=url;if(offer_ids_dashed!=""){var new_url=url.replace(/\/$/,'')+"/"+offer_ids_dashed}
offer.attr("data-offer-id",offer_ids_dashed);$("#modal_cfs").attr("data-offer-id",offer_ids_dashed);offer.find(".btn").attr("href",new_url)}
if($('#build-a-plan').length>0){var market=getCookie('geo_region')}
if($('.build-a-plan').length){var tvToggleTimer;$('#enable-mobile').change(function(){if($(this).prop('checked')==!0){window.clearTimeout(tvToggleTimer);$('.product-mobile-content').addClass('show');tvToggleTimer=setTimeout(function(){$('.product-mobile-content').addClass('active');bapPriceUpdate()},10)}else{window.clearTimeout(tvToggleTimer);$('.product-mobile-content').removeClass('active');bapPriceUpdate();tvToggleTimer=setTimeout(function(){$('.product-mobile-content').removeClass('show')},500)}});$('#enable-tv').change(function(){if($(this).prop('checked')==!0){window.clearTimeout(tvToggleTimer);$('.product-tv-content, .tv-addons').addClass('show');tvToggleTimer=setTimeout(function(){$('.product-tv-content, .tv-addons').addClass('active');bapPriceUpdate()},10)}else{window.clearTimeout(tvToggleTimer);$('.product-tv-content, .tv-addons').removeClass('active');bapPriceUpdate();tvToggleTimer=setTimeout(function(){$('.product-tv-content, .tv-addons').removeClass('show')},500)}});$(document).on('change','#bap-internet-speed-input, #bap-tv-type-input, .form-type-checkbox input[type="checkbox"], .radio-buttons input[type="radio"]',function(){bapPriceUpdate()});$(document).on('change','#bap-term-input',function(){var market_cookie=getCookie('geo_region');bap_load_market(market_cookie)})}
$("#modal_cfs").on('hide.bs.modal',function(e){var market=getCookie('geo_region');var brand=getCookie('geo_brand');var cfs_shop_url=getCookie('cfs_shop_url');if(market==null){market=""}
market_change=!1;brand_change=!1;console.log("current page : "+currentPageUrl+":"+brand+":"+brand_previous+':');if(currentPageUrl=='/shop/build-a-plan/'){if(brand_previous!==brand_previous){brand_change=!0;console.log('new brand')}
if(market!==market_previous){market_change=!0;console.log('new market')}
console.log('cfs shop url',cfs_shop_url);console.log('confirming window condition',brand=="wave",brand==brand_previous,market_change,cfs_shop_url);if(brand==="wave"){if(cfs_shop_url===null){if(market_change==!0){console.log("keeping window open.",brand,brand==brand_previous,market_change,cfs_shop_url);e.preventDefault();$('#cfs-address-tab').tab('show')}}}
if((market==="indiana")&&cfs_shop_url===null){e.preventDefault();$('#cfs-address-tab').tab('show')}}});$(document).on('show.bs.modal','#modal_cfs',function(){$('#cfs-region-tab').css('visibility','visible');var market=getCookie('geo_region');console.log("current market (open): "+market)})});function bap_load_market(market){console.log("m",market);var brand=getCookie('geo_brand');offer_term="12";if(market=="washington"){offer_term=$("#bap-term-input").val()}
$('#enable-tv').prop('checked',!1);$('.product-tv-content, .tv-addons').removeClass('active');$('.product-tv-content, .tv-addons').removeClass('show');var market_file="boston.json";if(offer_term=="6"){offer_term="06"}else if(offer_term=="0"){offer_term="12"}
console.log("offer_term: ",offer_term);if(market=="dc-metro"){market="washington-dc"}
market_file=market+"-"+offer_term+".json";var speed_limit=!1;var brand="";if(market==="bay-area"||market==="washington"||market==="oregon"){brand="wave"}
var open_cfs_modal=!1;if(brand==="wave"&&(getCookie('cfs_shop_url')===null||getCookie('cfs_shop_url').length==0)){open_cfs_modal=!0}
if((market==="indiana")&&(getCookie('cfs_shop_url')===null||getCookie('cfs_shop_url').length==0)){open_cfs_modal=!0}
if(open_cfs_modal){console.log("wave & no cfs_shop_url");$('#modal_cfs .close-button').css('display','none');$('#modal_cfs').modal({backdrop:'static',keyboard:!1})
$('article, #modal_cfs').attr('force-cfs','true');$('#cfs-address-tab').tab('show');console.log("show1 ",market+":"+market_previous);$("#modal_cfs").modal("show");return!1;console.log("show2 ",market+":"+market_previous)}
var brand=getCookie('geo_brand');market_override_data=[{market:"wave",data:[{market_transport_arr:["WAVEG","WAVEG100"],market_marketing_ids_arr:["WA_WAVEG_1"],override_file:"WN-WG1-12.json"},{market_transport_arr:["WAVEG","WAVEG100"],market_marketing_ids_arr:["WA_WAVEG_2"],override_file:"WN-WG2-12.json"},{market_transport_arr:["WA_FTTH"],market_marketing_ids_arr:["WAFTTH"],override_file:"WN-FH-"+offer_term+".json"},{market_transport_arr:["HFC250","HFC"],market_marketing_ids_arr:["WA_INCUMBENT"],override_file:"WN-"+offer_term+".json"},{market_transport_arr:["HFC250"],market_marketing_ids_arr:["WABWCONSTRAINT"],override_file:"WN-BW-12.json"},{market_transport_arr:["HFC"],market_marketing_ids_arr:["CA_INCUMBENT_1"],override_file:"WS-IN1-12.json"},{market_transport_arr:["CA_FTTH"],market_marketing_ids_arr:["CAFTTH"],override_file:"WS-FHCA-12.json"},{market_transport_arr:["WAVEG","WAVEG100"],market_marketing_ids_arr:["CA_WAVEG_1","CA_WAVEG_1EB","OR_WAVEG_1"],override_file:"WS-WG-12.json"},{market_transport_arr:["HFC100","HFC250"],market_marketing_ids_arr:["BW_CONSTRAINT"],override_file:"WS-BW-12.json"},{market_transport_arr:["OR_FTTH"],market_marketing_ids_arr:["ORFTTH"],override_file:"WS-FHOR-12.json"},{market_transport_arr:["HFC"],market_marketing_ids_arr:["INCUMBENT"],override_file:"WS-IN-12.json"},{market_transport_arr:["HFC"],market_marketing_ids_arr:["INCUMBENT"],override_file:"WS-IN-12.json"},{market_transport_arr:["XGSPON","XGSPON"],market_marketing_ids_arr:["CAFTTH"],override_file:"WS-XGCA-12.json"},{market_transport_arr:["XGSPON","XGSPON"],market_marketing_ids_arr:["ORFTTH"],override_file:"WS-XGOR-12.json"},]},{market:"sacramento",data:[{market_transport_arr:["HFC100","HFC","HFC250"],market_marketing_ids_arr:["OVERBUILT","OVERBUILT_EB"],override_file:"WS-OB-CA-12.json"},]},{market:"oregon",data:[{market_transport_arr:["HFC100","HFC","HFC250"],market_marketing_ids_arr:["OVERBUILT","OVERBUILT_EB"],override_file:"WS-OB-OR-12.json"}]},{market:"houston",data:[]},{market:"chicago",data:[]},];if(market==="sacramento"){market_file="WS-OB-CA-12.json"}
market_override=market_override_information(brand,market,market_file,market_override_data,speed_limit);market_file=market_override.market_file;speed_limit=market_override.speed_limit;var company_id=getCookie('cfs_company_id');var cfs_marketing_id=decodeURIComponent(getCookie('cfs_marketing_ids'));var transport_method=decodeURIComponent(getCookie('cfs_transport_method'));var company_id_mappings=[{id:82,file:'TX-AU'},{id:83,file:'TX-SA'},{id:84,file:'TX-DA'},{id:86,file:'TX-WC'},{id:87,file:'TX-ML'},{id:88,file:'TX-CC'},{id:89,file:'TX-OD'},{id:90,file:'TX-TE'},{id:91,file:'TX-SM'},]
if(Array.isArray(company_id_mappings)&&company_id&&market=='texas'){for(let[key,value]of Object.entries(company_id_mappings)){if(value.id==company_id){if(cfs_marketing_id.includes('TEXAS_200')&&transport_method.includes("HFC")){market_file=value.file+'-'+'200'+'-'+offer_term+'.json'}else if(cfs_marketing_id.includes('TEXAS_200')&&transport_method.includes("FTTH")){market_file=value.file+'-'+'F200'+'-'+offer_term+'.json'}else if(!cfs_marketing_id.includes('TEXAS_200')&&transport_method.includes("FTTH")){market_file=value.file+'-'+'F'+'-'+offer_term+'.json'}else{market_file=value.file+'-'+offer_term+'.json'}}}}
if(market==="houston"&&cfs_marketing_id.includes('TEXAS_200')&&transport_method.includes("HFC")){market_file="TX-HU-200-12.json"}
if(market==="houston"&&cfs_marketing_id.includes('TEXAS_200')&&transport_method.includes("FTTH")){market_file="TX-HU-F200-12.json"}
if(market==="houston"&&!cfs_marketing_id.includes('TEXAS_200')&&transport_method.includes("FTTH")){market_file="TX-HU-F-12.json"}
bap_file_directory="/wp-content/uploads/build_a_plan/";console.log("market overrides",market_file,speed_limit);if(location.hostname.includes('dev')||location.hostname.includes('modx')){var target_date_enabled=$('#build-a-plan').attr('data-td-enabled');if(target_date_enabled=="1"){console.log('is enabled');bap_file_directory="/wp-content/uploads/ck_target_date/build_a_plan/"}}
let service_categories_ex=(getCookie('cfs_service_categories_ex')!=null)?JSON.parse(getCookie('cfs_service_categories_ex')):!1;if(service_categories_ex){if(service_categories_ex.C.is_serviceable==="false"||service_categories_ex.C.is_serviceable===!1){$("#row-tv").hide()}else{$("#row-tv").show()}}
var bap_file_url=baseSiteUrl+bap_file_directory+market_file;if(market_file_previous===market_file&&speed_limit_previous===speed_limit){return}
if(typeof(market)=="undefined"||market==null||market==""||market=="default"){console.log('market undefined.');$('#modal_cfs .close-button').css('display','none');$('#modal_cfs #cfs-region .modal-footer').css('display','none');$('#modal_cfs').modal({backdrop:'static',keyboard:!1})
$("#modal_cfs").modal("show");$('#cfs-region-tab').tab("show");return!1}
$("#bap-internet-addon-18-wrapper,#bap-internet-speed-input,#bap-tv-addon-wrapper").empty();if($(".product-tv-content").hasClass("active")){$("#enable-tv").trigger("click")}
$("#bap-internet-addon-29,#bap-phone-addon").prop("checked",!1);market_file_previous=market_file;speed_limit_previous=speed_limit;market_previous=market;brand_previous=brand;$.ajax({type:"GET",dataType:"json",url:bap_file_url+'?'+Date.now(),success:function(response){bap_data=response;bap_json_file=response.file;var tv_checked=$('#enable-tv').prop('checked');var phone_checked=$("#bap-phone-addon").is(':checked');var service_code="D";tv_tier_selected=$('#bap-tv-type-input option:selected').val();if(tv_checked&&phone_checked){is_tp=!0;is_i=!1;service_code="DCT"}else{if(tv_checked){is_dp=!0;is_dp_ic=!0;is_i=!1;service_code="DC"}
if(phone_checked){is_dp=!0;is_dp_ip=!0;is_i=!1;service_code="DT"}}
$('#bap-internet-speed-input option').each(function(){$(this).remove()});var speed_counter=0;if(speed_limit!==!1){response.speeds=response.speeds.filter((el)=>{return speed_limit>=el})}
internet_offer_lowest_speed=response.speeds.length>0?Math.min(...response.speeds):''
$.each(response.speeds,function(value,value){speed_counter++;var eachSpeed=value;var eachPrice=0;var is_selected=!1;var activeSpeed='';if(speed_counter==2){is_selected=!0;activeSpeed='active'}
$('#bap-internet-speed-input').append($("<option></option>").attr("value",value).prop('selected',is_selected).text(value+" Mbps"));$.each(bap_data.offers,function(key,value){var offer=this;if(service_code=="D"&&(offer.service_codes==service_code&&offer.speed==eachSpeed)){eachPrice=(offer.price_js/100).toFixed(2)}
if(service_code=="DC"&&(offer.service_codes==service_code&&offer.speed==eachSpeed&&offer.tv.tv_tier==tv_tier_selected)){eachPrice=(offer.price_js/100).toFixed(2)}
if(service_code=="DT"&&(offer.service_codes==service_code&&offer.speed==eachSpeed)){eachPrice=(offer.price_js/100).toFixed(2)}
if(service_code=="DCT"&&(offer.service_codes==service_code&&offer.speed==eachSpeed&&offer.tv.tv_tier==tv_tier_selected)){eachPrice=(offer.price_js/100).toFixed(2)}});$('#bap-internet-speed-choices').append($('<div class="bap-isc '+activeSpeed+'" speed="'+value+'"><div class="bap-isc-speed">'+value+'</div><div class="bap-isc-price">$'+eachPrice+'</div></div>'))});url_param_speed=(url_params.get('speed')&&url_params.get('speed')!='')?parseInt(url_params.get('speed')):!1;if(url_param_speed&&response.speeds.includes(url_param_speed)){$('#bap-internet-speed-input').val(url_param_speed)}
$('#bap-tv-type-input option').each(function(){$(this).remove()});$.each(response.tv_tiers,function(key,value){var tv_tier=this;$('#bap-tv-type-input').append($("<option></option>").attr("value",tv_tier.tier).text(tv_tier.title));if(key==0){activeTV='active'}else{activeTV=''}
$('#bap-tv-type-choices').append($('<div class="bap-tvc '+activeTV+'" tier="'+tv_tier.tier+'"><div class="bap-tvc-tier">'+tv_tier.title+'</div><div class="bap-isc-price"></div></div>'))});if(response.tv_tiers.length==0){$("#row-tv").hide()}else{$("#row-tv").show()}
for(i=1;i<=3;i++){activeMobilePlan='';switch(i){case 1:activeMobilePlan='active';mobilePlanData='1.5';mobilePlanLabel='1.5GB';mobilePlanPrice='15.00';break;case 2:mobilePlanData='3';mobilePlanLabel='3GB';mobilePlanPrice='25.00';break;case 3:mobilePlanData='Unlimited';mobilePlanLabel='Unlimited';mobilePlanPrice='40.00';break}
$('#bap-mobile-data-choices').append($('<div class="bap-mdc '+activeMobilePlan+'" plan="'+mobilePlanData+'"><div class="bap-mdc-speed">'+mobilePlanLabel+'</div><div class="bap-mdc-price">$'+mobilePlanPrice+'</div></div>'))}
var addon_counter=0;$.each(response.premium_channels,function(key,value){addon_counter++;var tv_price=this.price_js;var addon_id=this.id;var promo_message_caption="";if(typeof(this.promo_message_1.caption)!="undefined"&&this.promo_message_1.caption!==null&&this.promo_message_1.caption!=="null"&&this.promo_message_1.caption!=""){promo_message_caption=this.promo_message_1.caption}
$('#bap-tv-addon-wrapper').append($('\
				<div class="form-item form-type-checkbox">\
					<input type="checkbox" name="bap-tv-addon-10-'+addon_counter+'" id="bap-tv-addon-10-'+addon_counter+'" data-price="'+tv_price+'" value="'+addon_id+'" class="checkbox-tv-addon">\
					<label class="option" for="bap-tv-addon-10-'+addon_counter+'" >\
						<span class="title">'+this.offer_info.published_title+'</span><span class="description">'+promo_message_caption+'</span>\
					</label>\
				</div>').attr("value",this.id).text(this.title));if(market==="houston"||market==="texas"){if(this.offer_info.title==="TX-HBO-MAX -50-300-600"||this.offer_info.title==="TX-HBO-MAX -50-400-600"||this.offer_info.title==="TX-MAX -50-400-600"){defaultDataPrice=tv_price}}
if(market==="brownwood"){if(this.offer_info.title==="TX-HBO-MAX -50-300-600"||this.offer_info.title==="TX-HBO-MAX -50-400-600"||this.offer_info.title==="TX-MAX -50-400-600"){defaultDataPrice=tv_price}}
if(market==="new-york"){if(this.offer_info.title==="HBO-MAX -NY-100-250-500"||this.offer_info.title==="HBO-MAX -NY-100-600"||this.offer_info.title==="HBO-MAX -NY-100-250-600"||this.offer_info.title==="HBO-MAX -NY-300-600-1G"||this.offer_info.title==="MAX -NY-300-600-1G"){defaultDataPrice=tv_price}}});url_param_internet_add_ons=(url_params.get('internet-addons')&&url_params.get('internet-addons')!='')?url_params.get('internet-addons'):!1;var addon_counter=0;$.each(response.streaming_tv,function(key,value){addon_counter++;var addon_price=this.price_js;var addon_id=this.id;$('#bap-internet-addon-18-wrapper').append($('\
				<div class="form-item form-type-checkbox" id="bap-internet-addon-18-wrapper-'+addon_counter+'">\
					<input type="checkbox" name="bap-internet-addon-18-'+addon_counter+'" id="bap-internet-addon-18-'+addon_counter+'" data-price="'+addon_price+'" value="'+addon_id+'" >\
					<label class="option" for="bap-internet-addon-18-'+addon_counter+'">\
						<span class="title">'+this.offer_info.published_title+'</span><span class="description">'+this.promo_message_1.caption+'</span>\
					</label>\
				</div>').attr("value",this.id).text(this.title))});bapPriceUpdate();offer_term="12";if(response.show_terms=="1"){$("#bap-term-input-wrapper").show();offer_term=$("#bap-term-input").val()}else{$("#bap-term-input-wrapper").hide()}}})}
function parseResponseData(string,type=!1){let parsed_string=''
try{parsed_string=JSON.parse(string)
if(type=='market_ids'){let marketing_ids_object=parsed_string.reduce((ids,item)=>{ids=[...ids,item.marketing_id];return ids},[])
return marketing_ids_object}
if(type=='transport_method'){if(parsed_string){return parsed_string.data}else{return parsed_string}}
if(type=='service_categories'){return parsed_string}
if(type=='prism_code'){return parsed_string}}catch(error){parsed_string=string.split(',')
return parsed_string}}
function market_override_information(brand,market,market_file,market_override_data,speed_limit){let cfs_marketing_id_cookie=decodeURIComponent(getCookie('cfs_marketing_ids'));let transport_method_cookie=decodeURIComponent(getCookie('cfs_transport_method'));let cfs_marketing_id=parseResponseData(cfs_marketing_id_cookie,'market_ids');let transport_method=parseResponseData(transport_method_cookie,'transport_method');let cfs_company_id=decodeURIComponent(getCookie('cfs_company_id'));let cfs_prism_code=decodeURIComponent(getCookie('cfs_prism_code'));if(market==="chicago"&&cfs_company_id==="2"){market_file="chicagoland-12.json";console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}
if(market==="new-york"&&transport_method&&(transport_method.includes('FTTH')||transport_method.includes('FTTH1'))){market_file="new-york-F-12.json";console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}
if(market==="brownwood"){market_file="TX-HBF-12.json";console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}
if(market==="washington"&&cfs_marketing_id&&(cfs_company_id==="32"||cfs_company_id==="33"||cfs_company_id==="34")&&!cfs_marketing_id.includes('WAFTTH')&&cfs_prism_code==="AG"){market_file="WN-AG-12.json";console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}
if(market==="washington"&&cfs_marketing_id&&(cfs_company_id==="32"||cfs_company_id==="33"||cfs_company_id==="34")&&cfs_marketing_id.includes('WAFTTH')&&cfs_prism_code==="AG"){market_file="WN-AG-FH-12.json";console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}
if(market==="washington"&&cfs_marketing_id&&cfs_marketing_id.includes('WABWCONSTRAINT')&&cfs_prism_code==="UD"){market_file="WN-BWUD-12.json";console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}
if(market==="washington"&&cfs_marketing_id&&!cfs_marketing_id.includes('WABWCONSTRAINT')&&cfs_prism_code==="UD"){market_file="WN-UD-12.json";console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}
if(market==="oregon"&&cfs_marketing_id&&cfs_marketing_id.includes('BW_CONSTRAINT')&&cfs_prism_code==="UD"){market_file="WS-BWUD-12.json";console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}
if(market==="oregon"&&cfs_marketing_id&&!cfs_marketing_id.includes('BW_CONSTRAINT')&&cfs_prism_code==="UD"){market_file="WS-ORUD-12.json";console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}
if(market==="oregon"&&cfs_marketing_id&&cfs_company_id==="26"&&cfs_marketing_id.includes('OVERBUILT')&&cfs_prism_code==="AG"){market_file="WS-OBORAG-12.json";console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}
if(market==="oregon"&&cfs_marketing_id&&(cfs_company_id==="27")&&cfs_marketing_id.includes('XGSPON')){market_file="WS-XGXGOR-12.json";console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}
if(market==="sacramento"&&cfs_marketing_id&&(cfs_company_id==="14")&&cfs_marketing_id.includes('XGSPON')){market_file="WS-XGXGCA-12.json";console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}
if(market==="bay-area"&&cfs_marketing_id&&cfs_company_id==="15"&&cfs_marketing_id.includes('CAFTTH')){market_file="WS-FHCABA-12.json";console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}
if(market==="maryland"&&transport_method&&cfs_company_id==="80"&&transport_method.includes('XGSPON')){market_file="maryland-xg-12.json";console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}
for(var marketIndex=0;marketIndex<market_override_data.length;marketIndex ++){var market_match=!1;if(market_override_data[marketIndex].market=="sacramento"||market_override_data[marketIndex].market=="oregon"){var geo_region=getCookie('geo_region');if(market_override_data[marketIndex].market==geo_region){market_match=!0}}
if(market_override_data[marketIndex].market===brand||market_match){market_check_data=market_override_data[marketIndex].data;for(var i=0;i<market_check_data.length;i++){var transport_method_match=!1;if(transport_method!==null&&transport_method.length>0){market_transport_arr=market_check_data[i].market_transport_arr;transport_method_array=transport_method;for(let i=0;i<market_transport_arr.length;i++){if(transport_method_array.includes(market_transport_arr[i])){transport_method_match=!0}}
speed_limit=setSpeedLimit(transport_method_array)}
var marketing_id_match=!1;if(cfs_marketing_id!==null&&cfs_marketing_id.length>0){market_marketing_ids_arr=market_check_data[i].market_marketing_ids_arr;cfs_marketing_ids_array=cfs_marketing_id;transport_match=!1;for(let i=0;i<market_marketing_ids_arr.length;i++){if(cfs_marketing_ids_array.includes(market_marketing_ids_arr[i])){marketing_id_match=!0}}}
if(transport_method_match&&marketing_id_match){market_file=market_check_data[i].override_file;console.log('override market file to',market_file);return{speed_limit:speed_limit,market_file:market_file}}}}}
return{speed_limit:speed_limit,market_file:market_file}}
function setSpeedLimit(transport_methods){let digits=[4,3,2];for(var i=0;i<digits.length;i ++){var transport_max_speed=transport_methods.substr(transport_methods.length-digits[i]);if($.isNumeric(transport_max_speed)){return parseInt(transport_max_speed)}}
return!1}
function checkHBO(market,item){let offer=!1
let offer_market=market
let hbo_bullet=!1
const hbo_markets_speeds=[{'market':'new-york','speeds':[1200]}]
offer=item
for(let i=0;i<hbo_markets_speeds.length;i++){let market_match=!1
let speed_match=!1
if(hbo_markets_speeds[i].market.includes(offer_market)){market_match=!0}
if(hbo_markets_speeds[i].speeds.includes(offer.speed)){speed_match=!0}
if(market_match&&speed_match){hbo_bullet=!0
break}}
return hbo_bullet}
function checkRouterGroup(item){let offer=!1
let router_group=!1
let router_groups=['AST-SHOP-WN-BW-12','AST-SHOP-WN-BWUD-12','AST-SHOP-WS-WG-CPI','AST-SHOP-WN-WG1-CPI','AST-SHOP-WN-WG2-CPI',]
offer=item
if(offer&&router_groups.includes(offer.grouped_with)){router_group=!0}
return router_group}
function checkRouterModemGroup(item){let offer=!1
let router_modem_group=!1
let router_modem_groups=['AST-SHOP-WN-12-CPI','AST-SHOP-WN-AG-CPI','AST-SHOP-WN-UD-CPI','AST-SHOP-WS-IN-CPI','AST-SHOP-WS-OB-CPI','AST-SHOP-WS-OBBA-CPI','AST-SHOP-WS-OBORAG-CPI','AST-SHOP-WS-ORUD-CPI',]
offer=item
if(offer&&router_modem_groups.includes(offer.grouped_with)){router_modem_group=!0}
return router_modem_group}
var tv_prices=[];function bapPriceUpdate(){var market=getCookie('geo_region');var is_i=!0;var is_tp=!1;var is_dp=!1;var is_dp_ic=!1;var is_dp_ip=!1;var tv_checked=$('#enable-tv').prop('checked');var phone_checked=$("#bap-phone-addon").is(':checked');var service_code="D";var selected_speed=$('#bap-internet-speed-input').val();tv_tier_selected=$('#bap-tv-type-input option:selected').val();if(tv_checked&&phone_checked){is_tp=!0;is_i=!1;service_code="DCT"}else{if(tv_checked){is_dp=!0;is_dp_ic=!0;is_i=!1;service_code="DC"}
if(phone_checked){is_dp=!0;is_dp_ip=!0;is_i=!1;service_code="DT"}}
var offer_ids=[];$(".build-list-show-hide").hide();var selected_offer=[];var phone_default_offer=[];var phone_anticipated_offer=[];var checked_premium_channels=[];$.each(bap_data.offers,function(key,value){var offer=this;if(service_code=="D"&&(offer.service_codes==service_code&&offer.speed==selected_speed)){selected_offer=offer}
if(service_code=="DC"&&(offer.service_codes==service_code&&offer.speed==selected_speed&&offer.tv.tv_tier==tv_tier_selected)){selected_offer=offer;tv_price_item={selected:!0,tier:offer.tv.tv_tier,price_mrc:offer.tv.price_mrc_js,price:offer.tv.price_js,}}
if(service_code=="DT"&&(offer.service_codes==service_code&&offer.speed==selected_speed)){selected_offer=offer}
if(service_code=="DCT"&&(offer.service_codes==service_code&&offer.speed==selected_speed&&offer.tv.tv_tier==tv_tier_selected)){selected_offer=offer;tv_price_item={selected:!0,tier:offer.tv.tv_tier,price_mrc:offer.tv.price_mrc_js,price:offer.tv.price_js,}}
if(is_dp_ic&&(offer.service_codes=="DCT"&&offer.speed==selected_speed&&offer.tv.tv_tier==tv_tier_selected)){phone_anticipated_offer=offer;tv_price_item={selected:!0,tier:offer.tv.tv_tier,price_mrc:offer.tv.price_mrc_js,price:offer.tv.price_js,}}
if(is_i&&(offer.service_codes=="DT"&&offer.speed==selected_speed)){phone_anticipated_offer=offer}
if(service_code=="DC"&&(offer.service_codes==service_code&&offer.speed==selected_speed&&offer.tv.tv_tier!=tv_tier_selected)){tv_price_item={selected:!1,tier:offer.tv.tv_tier,price_mrc:offer.tv.price_mrc_js,price:offer.tv.price_js,}}
if(service_code=="DCT"&&(offer.service_codes==service_code&&offer.speed==selected_speed&&offer.tv.tv_tier!=tv_tier_selected)){tv_price_item={selected:!1,tier:offer.tv.tv_tier,price_mrc:offer.tv.price_mrc_js,price:offer.tv.price_js,}}
if(is_dp_ic&&(offer.service_codes=="DCT"&&offer.speed==selected_speed&&offer.tv.tv_tier!=tv_tier_selected)){tv_price_item={selected:!1,tier:offer.tv.tv_tier,price_mrc:offer.tv.price_mrc_js,price:offer.tv.price_js,}}
if(typeof tv_price_item!=="undefined"){alreadyExists=!1;$.each(tv_prices,function(key,value){var item=this;if(item.selected!=tv_price_item.selected&&item.tier==tv_price_item.tier&&item.price_mrc==tv_price_item.price_mrc&&item.price==tv_price_item.price){tv_prices.splice(key,1)}
if(item.selected==tv_price_item.selected&&item.tier==tv_price_item.tier&&item.price_mrc==tv_price_item.price_mrc&&item.price==tv_price_item.price){alreadyExists=!0}});if(alreadyExists==!1){tv_prices.push(tv_price_item)}}});$(".bap-internet-price .price-amount .dollars").html(parseInt(selected_offer.price_js/100));$("#internet_bullets").html(selected_offer.bullets);if("equip_included" in selected_offer){if(!selected_offer.equip_included){$("#equipment-pricing").html("Equipment priced separately")}else{$("#equipment-pricing").html("")}}else{$("#equipment-pricing").html("")}
if(market==="boston"){if($('#enable-tv').prop('checked')==!0){$("#equipment-pricing").html("Modem/Router included 12 mo. Showtime/TMC AND Starz included 12 mo.")}else{$("#equipment-pricing").html("Equipment priced separately")}}
if((market==="texas"||market==="houston")&&(getCookie('cfs_shop_url')===null||getCookie('cfs_shop_url').length==0)){if($('#enable-tv').prop('checked')==!0){$('#modal_cfs .close-button').css('display','none');$('#modal_cfs').modal({backdrop:'static',keyboard:!1})
$('article, #modal_cfs').attr('force-cfs','true');$('#cfs-address-tab').tab('show');console.log("show1 ",market+":"+market_previous);$("#modal_cfs").modal("show");return!1;console.log("show2 ",market+":"+market_previous)}}
if(("cat_10" in selected_offer)){$("#bap-internet-addon-10-wrapper .title").html(selected_offer.cat_10.offer_info.published_title);$("#bap-internet-addon-10-wrapper .description").html(selected_offer.cat_10.promo_message_1.caption);$("#bap-internet-addon-10").attr("data-price",selected_offer.cat_10.price_js);$("#bap-internet-addon-10").val(selected_offer.cat_10.id);$("#bap-internet-addon-10-wrapper").show();if(url_param_internet_add_ons&&url_param_internet_add_ons==="selected"){$('#bap-internet-addon-10').prop('checked',!0)}}else{$("#bap-internet-addon-10-wrapper").hide()}
if(("cat_29" in selected_offer)){$("#bap-internet-addon-29-wrapper .title").html(selected_offer.cat_29.offer_info.published_title);$("#bap-internet-addon-29-wrapper .description").html(selected_offer.cat_29.promo_message_1.caption);$("#bap-internet-addon-29").attr("data-price",selected_offer.cat_29.price_js);$("#bap-internet-addon-29").val(selected_offer.cat_29.id);$("#bap-internet-addon-29-wrapper").show();if(url_param_internet_add_ons&&url_param_internet_add_ons==="selected"){$('#bap-internet-addon-29').prop('checked',!0)}}else{$("#bap-internet-addon-29-wrapper").hide()}
var list_internet=selected_speed+" Mbps Internet*";if(selected_speed=="1000"){list_internet="Gig Internet* (1000 Mbps)"}
$("#list-internet").html(list_internet);let promo_term=selected_offer.offer_info.promo_term;let coupon_msg=selected_offer.offer_info.coupon_msg;let strikethru_price=selected_offer.offer_info.strikethru_price;let coupon_display=selected_offer.offer_info.coupon_display;let gift_card_amt=selected_offer.offer_info.gift_card_amt;let free_install=selected_offer.offer_info.free_install;let months_free=selected_offer.offer_info.months_free;$('.coupon-secondary').remove();if((gift_card_amt===''||gift_card_amt===null||gift_card_amt==="null")&&(free_install===''||free_install===null||free_install==="null"||free_install===!1)&&(months_free===''||months_free===null||months_free==="null")){$('.coupon').hide()}else{$('.coupon').show()}
if(gift_card_amt!=undefined&&gift_card_amt!="undefined"&&gift_card_amt!=null&&gift_card_amt){if(gift_card_amt===25){$(".coupon-primary-img img").attr("src","/wp-content/themes/astound/images/icons/gbb_coupons/$25-gift-card.png")}else if(gift_card_amt===50){$(".coupon-primary-img img").attr("src","/wp-content/themes/astound/images/icons/gbb_coupons/$50-gift-card.png")}else if(gift_card_amt===75){$(".coupon-primary-img img").attr("src","/wp-content/themes/astound/images/icons/gbb_coupons/$75-gift-card.png")}else if(gift_card_amt===100){$(".coupon-primary-img img").attr("src","/wp-content/themes/astound/images/icons/gbb_coupons/$100-gift-card.png")}else if(gift_card_amt===150){$(".coupon-primary-img img").attr("src","/wp-content/themes/astound/images/icons/gbb_coupons/$150-gift-card.png")}else if(gift_card_amt===200){$(".coupon-primary-img img").attr("src","/wp-content/themes/astound/images/icons/gbb_coupons/$200-gift-card.png")}else if(gift_card_amt===250){$(".coupon-primary-img img").attr("src","/wp-content/themes/astound/images/icons/gbb_coupons/$250-gift-card.png")}else if(gift_card_amt===300){$(".coupon-primary-img img").attr("src","/wp-content/themes/astound/images/icons/gbb_coupons/$300-gift-card.png")}else{$(".coupon-primary-img img").attr("src","")}
$(".coupon-primary-title").html("$"+gift_card_amt);$(".coupon-primary-subtitle").html("Gift Card±±");if(months_free!=undefined&&months_free!="undefined"&&months_free!=null&&months_free){if(months_free>1){$(".coupon-upper").append("<div class='coupon-secondary'>"+months_free+" FREE Months</div>")}else{$(".coupon-upper").append("<div class='coupon-secondary'>"+months_free+" FREE Month</div>")}}
if(free_install!=undefined&&free_install!="undefined"&&free_install!=null&free_install){$(".coupon-upper").append("<div class='coupon-secondary'>Free installation ($79.95 value)</div>")}}else if(months_free!=undefined&&months_free!="undefined"&&months_free!=null&&months_free){$(".coupon-primary-img img").attr("src","/wp-content/themes/astound/images/icons/gbb_coupons/free-price-tag.png");if(months_free>1){$(".coupon-primary-title").html(months_free+" FREE Months")}else{$(".coupon-primary-title").html(months_free+" FREE Month")}
$(".coupon-primary-subtitle").html("of Service");if(free_install!=undefined&&free_install!="undefined"&&free_install!=null&free_install){$(".coupon-upper").append("<div class='coupon-secondary'>Free installation ($79.95 value)</div>")}}else if(free_install!=undefined&&free_install!="undefined"&&free_install!=null&free_install){$(".coupon-primary-img img").attr("src","/wp-content/themes/astound/images/icons/gbb_coupons/free-install-2.png");$(".coupon-primary-title").html("FREE");$(".coupon-primary-subtitle").html("Installation ($79.95 value)")}
if(coupon_display!=undefined&&coupon_display!="undefined"&&coupon_display!=null&&coupon_display!=""&&coupon_display){$(".coupon-lower").show();$(".coupon-lower strong").html(coupon_display)}else{$(".coupon-lower").hide()}
if(promo_term!=undefined&&promo_term!=null&&promo_term){$("#wyg-month").html(promo_term)}
let bap_selected_speed=$('#bap-internet-speed-input').val();let modal_disclaimer_build_plan_speed=document.querySelector('#modal_disclaimer_build_plan .modal-title span');if(modal_disclaimer_build_plan_speed!=null&&bap_selected_speed){modal_disclaimer_build_plan_speed.textContent=bap_selected_speed}
if(typeof(selected_offer.offer_info)!="undefined"&&selected_offer.offer_info!==null&&selected_offer.offer_info!=="null"&&selected_offer.offer_info!=""){if(("promotional_message" in selected_offer.offer_info)){if(selected_offer.offer_info.promotional_message!=""){$("#bap-summary-coupon").html(selected_offer.offer_info.promotional_message).show()}else{$("#bap-summary-coupon").show()}}}
$(".bap-internet-price .price-amount .dollars").html(parseInt(selected_offer.price_js/100));$(".bap-internet-price .price-cents .cents").html(selected_offer.price_js.substring(2));if(is_dp_ic||is_i){if(phone_anticipated_offer.length==0){$("#bap-phone-addon-label").hide();$("#bap-phone-addon-label .dollars").html('');$("#bap-phone-addon-label .cents").html('')}else{$("#bap-phone-addon-label").show();var phone_anticipated_price=phone_anticipated_offer.phone.price_js;$("#bap-phone-addon-label .dollars").html(parseInt(phone_anticipated_price/100));var phone_cents=phone_anticipated_price.toString().slice(-2);if(phone_cents=="00"){phone_cents=""}else{phone_cents="."+phone_cents}
$("#bap-phone-addon-label .cents").html(phone_cents)}}
$("#list-multi-product-discount").hide();var mpd=!1;var brand=getCookie('geo_brand');if(is_dp_ic||is_tp){if(selected_offer.tv.pricing.picker_mrc!=selected_offer.tv.pricing.mrc_price){mpd=!0;if(brand==="wave"){$("#list-multi-product-discount").html("Local TV Stations Fees are an additional $28-$34 (pricing varies by market)").show()}else{$("#list-multi-product-discount").html("Multi-product Discount Applies").show()}}}
total_price=parseInt(selected_offer.price_js);if(selected_offer.service_codes=="DC"||selected_offer.service_codes=="DCT"){var tv_price=selected_offer.tv.price_js;var tv_price_mrc=selected_offer.tv.price_mrc_js;$("#list-tv-tier").html(selected_offer.tv.offer_info.published_title).show();total_price+=parseInt(tv_price);var tv_price_display=tv_price_mrc;tv_price_display=tv_price;if(mpd){console.log('mpd: '+brand);if(brand=="wave"){tv_price_display=tv_price}else{tv_price_display=tv_price_mrc}}
var eachPriceDollars;var eachPriceCents;$.each(tv_prices,function(key,value){var price_item=this;var price_to_use=price_item.price_mrc;if(mpd){if(brand=="wave"){price_to_use=price_item.price}else{price_to_use=price_item.price_mrc}}
eachPriceDollars=parseInt(price_to_use/100);eachPriceCents=price_to_use.toString().slice(-2);$('.bap-tvc[tier="'+price_item.tier+'"] .bap-isc-price').html('$'+eachPriceDollars+'.'+eachPriceCents)});$(".bap-tv-price .price-amount .dollars").html(parseInt(tv_price_display/100));$(".bap-tv-price .price-cents .cents").html(tv_price_display.toString().slice(-2));if(("bullets" in selected_offer.tv)){$("#bap-tv-bullets").html(selected_offer.tv.bullets)}}
if(selected_offer.service_codes=="DT"||selected_offer.service_codes=="DCT"){var phone_price=selected_offer.phone.price_js;if(market==="luzerne-county"){if(tv_checked){if(tv_tier_selected.includes('signature')||tv_tier_selected.includes('preferred')){phone_price="0"}}}
$("#list-phone").html(selected_offer.phone.offer_info.published_title).show();$("#bap-phone-addon").attr("data-price",phone_price).val(selected_offer.phone.id);$(".bap-phone-price .price-amount .dollars").html(parseInt(phone_price/100));$(".bap-phone-price .price-cents .cents").html(phone_price.toString().slice(-2))}
if("promo_message_3" in selected_offer){if("caption" in selected_offer.promo_message_3){$('#bap-region-price-disclaimer').html(selected_offer.promo_message_3.caption)}else{$('#bap-region-price-disclaimer').html('')}}else{$('#bap-region-price-disclaimer').html('')}
var promo_message=selected_offer.promo_message_3.caption;$("#bap-term-months").html(parseInt(selected_offer.offer_info.promo_term,10));$("#bap-region-price-disclaimer").html(selected_offer.region_price_disclaimer);var addons_checked=$('.checkbox-wrapper input:checkbox:checked');addons_checked.each(function(index){if(market==="houston"||market==="texas"){if(selected_speed==="300"||selected_speed==="400"||selected_speed==="600"){if($(this).attr('id')=="bap-tv-addon-10-1"){$(this).attr("data-price",defaultDataPrice)}}else if(selected_speed==="1000"||selected_speed==="1200"){if($(this).attr('id')=="bap-tv-addon-10-1"){$(this).attr("data-price",0)}}}
if(market==="brownwood"){if(selected_speed==="300"||selected_speed==="400"||selected_speed==="600"){if($(this).attr('id')=="bap-tv-addon-10-1"){$(this).attr("data-price",defaultDataPrice)}}else if(selected_speed==="1000"||selected_speed==="1200"){if($(this).attr('id')=="bap-tv-addon-10-1"){$(this).attr("data-price",0)}}}
if(market==="new-york"){if(selected_speed==="250"||selected_speed==="300"||selected_speed==="500"||selected_speed==="600"||selected_speed==="1000"){if($(this).attr('id')=="bap-tv-addon-10-1"){$(this).attr("data-price",defaultDataPrice)}}else if(selected_speed==="1200"){if($(this).attr('id')=="bap-tv-addon-10-1"){$(this).attr("data-price",0)}}}
var addon_id=$(this).val();var addon_price=$(this).attr("data-price");if(is_i||is_dp_ip){if($(this).hasClass("checkbox-tv-addon")){return}}
if($(this).hasClass("checkbox-tv-addon")){checked_premium_channels.push($(this).closest(".form-type-checkbox").find("span.title").html())}
if($(this).attr("id")=="bap-internet-addon-29"){$("#list-cat-29").html(selected_offer.cat_29.offer_info.published_title).show()}
if($(this).attr("id")=="bap-internet-addon-18-1"){$("#list-cat-18-1").html($(this).closest(".form-type-checkbox").find("span.title").html()).show()}
if($(this).attr("id")=="bap-internet-addon-18-2"){$("#list-cat-18-2").html($(this).closest(".form-type-checkbox").find("span.title").html()).show()}
if($(this).attr("id")=="bap-internet-addon-18-3"){$("#list-cat-18-3").html($(this).closest(".form-type-checkbox").find("span.title").html()).show()}
if($(this).attr("id")=="bap-internet-addon-10"){$("#list-cat-10").html($(this).closest(".form-type-checkbox").find("span.title").html()).show()}
total_price+=parseInt(addon_price);if($(this).attr("id")!="bap-phone-addon"){offer_ids.push(addon_id)}});var total_price_dollars=parseInt(total_price/100);var total_price_cents=total_price.toString().slice(-2);$(".bap-total-price .price-amount .dollars").html(total_price_dollars);$(".bap-total-price .price-cents .cents").html(total_price_cents);var shop_url=bap_shop_url();var addons_url=offer_ids.join("-");if(market==="houston"||market==="texas"){var hboIndex=checked_premium_channels.indexOf("Max™");if(selected_speed==="300"||selected_speed==="400"||selected_speed==="600"){if($('#bap-tv-addon-10-1').prop('checked')===!1&&hboIndex>-1){checked_premium_channels.shift()}
$('#bap-tv-addon-10-2').prop('checked',!1);$('#bap-tv-addon-10-2').parent().hide();$('#bap-tv-addon-10-1').parent().show()}else if(selected_speed==="1000"||selected_speed==="1200"){if($('#bap-tv-addon-10-2').prop('checked')===!1&&hboIndex>-1){checked_premium_channels.shift()}
$('#bap-tv-addon-10-1').prop('checked',!1);$('#bap-tv-addon-10-1').parent().hide();$('#bap-tv-addon-10-2').parent().show()}}
if(market==="brownwood"){var hboIndex=checked_premium_channels.indexOf("HBO Max™");if(selected_speed==="300"||selected_speed==="400"||selected_speed==="600"){if($('#bap-tv-addon-10-1').prop('checked')===!1&&hboIndex>-1){checked_premium_channels.shift()}
$('#bap-tv-addon-10-2').prop('checked',!1);$('#bap-tv-addon-10-2').parent().hide();$('#bap-tv-addon-10-1').parent().show()}else if(selected_speed==="1000"||selected_speed==="1200"){if($('#bap-tv-addon-10-2').prop('checked')===!1&&hboIndex>-1){checked_premium_channels.shift()}
$('#bap-tv-addon-10-1').prop('checked',!1);$('#bap-tv-addon-10-1').parent().hide();$('#bap-tv-addon-10-2').parent().show()}}
if(market==="new-york"){var hboIndex=checked_premium_channels.indexOf("Max™");if(selected_speed==="250"||selected_speed==="300"||selected_speed==="500"||selected_speed==="600"||selected_speed==="1000"){if($('#bap-tv-addon-10-1').prop('checked')===!1&&hboIndex>-1){checked_premium_channels.shift()}
$('#bap-tv-addon-10-2').prop('checked',!1);$('#bap-tv-addon-10-2').parent().hide();$('#bap-tv-addon-10-1').parent().show()}else if(selected_speed==="1200"){if($('#bap-tv-addon-10-2').prop('checked')===!1&&hboIndex>-1){checked_premium_channels.shift()}
$('#bap-tv-addon-10-1').prop('checked',!1);$('#bap-tv-addon-10-1').parent().hide();$('#bap-tv-addon-10-2').parent().show()}}
if(checked_premium_channels.length>0){var premium_channels_text=checked_premium_channels.join(" + ");$("#list-premium-channels").html(premium_channels_text).show()}
var offer_ids_split=selected_offer.shop_ids.toString().split("/");if(market==="luzerne-county"){if(phone_checked){let nonPhoneOffer=offer_ids_split.indexOf('47398');let nonPhoneOffer_1=offer_ids_split.indexOf('51911');if(tv_tier_selected.includes('signature')||tv_tier_selected.includes('preferred')){if(nonPhoneOffer!==-1){offer_ids_split[nonPhoneOffer]='47548'}
if(nonPhoneOffer_1!==-1){offer_ids_split[nonPhoneOffer_1]='51917'}}}}
var offer_ids_dashed="";var offer_split_counter=0;for(i=0;i<offer_ids_split.length;i++){var split_separator="-";if(i==0){split_separator=""}
if(i==1){split_separator="/"}
offer_ids_dashed+=split_separator+offer_ids_split[i];offer_split_counter++}
var shop_separator="-";if(offer_split_counter==1){shop_separator="/"}
var offer_ids=offer_ids_dashed+shop_separator+addons_url;shop_url=shop_url.replace(/\/?$/,'/');internet_offer_lowest_id=bap_data.offers.length>0?bap_data.offers[0].id:''
internet_offer_lowest_price=bap_data.offers.length>0?parseInt(bap_data.offers[0].price_js/100):''
internet_offer_lowest_shop_url=shop_url+internet_offer_lowest_id
let offers_filtered=bap_data.offers.filter(bap_offer=>bap_offer.speed==internet_offer_lowest_speed)
if(offers_filtered.length>0){top_bar_offer=offers_filtered[0]
top_bar_offer.price_parsed=parseInt(top_bar_offer.price_js/100)
top_bar_offer.shop_url=shop_url+top_bar_offer.id}
shop_url=shop_url+offer_ids;offer_ids=offer_ids.replace(/\/$/,'');$("#build-a-plan").attr("data-offer-id",offer_ids);$("#modal_cfs").attr("data-offer-id",offer_ids);shop_url=shop_url.replace(/\/$/,'');shop_url=shop_url.replace(/\-$/,'');$("#bap-submit").attr("href",shop_url);let service_categories_ex=(getCookie('cfs_service_categories_ex')!=null)?JSON.parse(getCookie('cfs_service_categories_ex')):!1;if(service_categories_ex){if(service_categories_ex.C.is_serviceable==="false"||service_categories_ex.C.is_serviceable===!1){$("#row-tv").hide()}else{$("#row-tv").show()}}
$("#pph-speed").html(internet_offer_lowest_speed+' Mbps Internet');$("#pph-price").html(top_bar_offer.price_parsed);$("#pph-submit").attr("href",top_bar_offer.shop_url);if(market==="brownwood"){$('.is-header').addClass('brownwood');$('.is-header.header-black.brownwood').css('display','block');$('.is-header.plan-promo-header.brownwood').css('display','none')}else{$('.is-header').removeClass('brownwood');$('.is-header.header-black').css('display','none');$('.is-header.plan-promo-header').css('display','block')}
let router_group=checkRouterGroup(selected_offer)
let router_modem_group=checkRouterModemGroup(selected_offer)
if(market==="brownwood"||market==="central-coast"){$('.wyg-bullet-last-container').html('<div class="wyg-bullet"><a href="/about-us/customer-pledge/" target="_blank">Our Customer Pledge</a></div>')}else if(router_group){$('.wyg-bullet-last-container').html('<div class="wyg-bullet">WiFi router included</div>')}else if(router_modem_group){$('.wyg-bullet-last-container').html('<div class="wyg-bullet">FREE Modem</div><div class="wyg-bullet">WiFi router included</div>')}else{$('.wyg-bullet-last-container').html('<div class="wyg-bullet">FREE Modem</div>')}
let hbo_bullet=checkHBO(market,selected_offer)
$('.wyg-bullet.wyg-bullet-hbo').css('display','none');if(hbo_bullet){$('.wyg-bullet.wyg-bullet-hbo').css('display','block');$('.wyg-bullet.wyg-bullet-hbo').html('HBO Max\u2122 for 1 Year')}else{$('.wyg-bullet.wyg-bullet-hbo').css('display','none');$('.wyg-bullet.wyg-bullet-hbo').html('')}
url_param_internet_add_ons=!1}
function validURL(str){var pattern=new RegExp('^(https?:\\/\\/)?'+'((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+'((\\d{1,3}\\.){3}\\d{1,3}))'+'(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+'(\\?[;&a-z\\d%_.~+=-]*)?'+'(\\#[-a-z\\d_]*)?$','i');return!!pattern.test(str)}
function toUSD(number){var number=number.toString(),dollars=number.split('.')[0],cents=(number.split('.')[1]||'')+'00';dollars=dollars.split('').reverse().join('').replace(/(\d{3}(?!$))/g,'$1,').split('').reverse().join('');return{"dollars":dollars,"cents":cents.slice(0,2)}}